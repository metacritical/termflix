#!/bin/bash

# Directory containing images
image_directory="./"

# Loop through all JPEG images in the directory
for img in *.jpg; do
    # Get the full path and the filename without the path
    full_path="$img"
    filename=$(basename "$img")

    # Use sips to get the height of the image
    height=$(sips -g pixelHeight "$full_path" | awk '/pixelHeight:/{print $2}')
    echo height

    # Calculate 60% of the height
    crop_height=$((height * 82 / 100))
    echo $crop_height

    crop_width=$(sips -g pixelWidth "$full_path" | awk '/pixelWidth:/{print $2}')
    echo $crop_width

    # Define the output file path
    output_file="$filename"

    # Crop the top 60% of the image
    sips --cropToHeightWidth $crop_height $crop_width --cropOffset 0 0 "$full_path" --out "$output_file"
    echo "Cropped image saved to $output_file"
done

echo "All images have been processed."
